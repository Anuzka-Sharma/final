<!DOCTYPE html>
<html lang="hi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рд╕рд╛рдЗрди рдЕрдк - рдЙрд░рд╛рд╡рд╛</title>
    <link rel="stylesheet" href="signup.css">
</head>

<body>

    <div class="signup-container">
        <h1 id="title">рд╕рд╛рдЗрди рдЕрдк</h1>
        <p id="desc">рдХреГрдкрдпрд╛ рдиреАрдЪреЗ рдЕрдкрдирд╛ рд╡рд┐рд╡рд░рдг рднрд░реЗрдВ</p>
        <form id="signupForm">
            <label for="username" id="nameLabel">рдкреВрд░рд╛ рдирд╛рдо:</label>
            <input type="text" id="username" placeholder="рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ">  <!-- ЁЯФД name тЖТ username -->

            <label for="mobile" id="phoneLabel">рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
            <input type="tel" id="mobile" placeholder="рдЕрдкрдирд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ"> <!-- ЁЯФД phone тЖТ mobile -->

            <label for="password" id="passwordLabel">рдкрд╛рд╕рд╡рд░реНрдб:</label>
            <input type="password" id="password" placeholder="рдкрд╛рд╕рд╡рд░реНрдб рдЪреБрдиреЗрдВ">

            <label for="signup-language" id="langLabel">ЁЯМП рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ:</label>
            <select id="signup-language">
                <option value="hindi">рд╣рд┐рдиреНрджреА</option>
                <option value="english">English</option>
            </select>

            <button type="submit" id="signup-btn">рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ</button>
        </form>

        <p id="login-text">рдкрд╣рд▓реЗ рд╕реЗ рдЦрд╛рддрд╛ рд╣реИ? <a href="login.html">рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ</a></p>
    </div>

    <script src="language.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const savedLang = localStorage.getItem("language") || "hindi";
            document.getElementById("signup-language").value = savedLang;
            applyLanguage(savedLang);
        });

        document.getElementById("signup-language").addEventListener("change", function () {
            const selectedLang = this.value;
            localStorage.setItem("language", selectedLang);
            applyLanguage(selectedLang);
        });

        document.getElementById("signupForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const username = document.getElementById("username").value.trim(); // тЬЕ Fix
            const mobile = document.getElementById("mobile").value.trim();   // тЬЕ Fix
            const password = document.getElementById("password").value.trim();

            if (!username || !mobile || !password) {
                alert("рдХреГрдкрдпрд╛ рд╕рднреА рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ!");
                return;
            }

            const userData = { username, mobile, password }; // тЬЕ Fix

            try {
                const response = await fetch("http://localhost:8080/auth/signup", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(userData),
                });

                const data = await response.json();

                if (data.message) {
                    alert("ЁЯОЙ рд╕рд╛рдЗрдирдЕрдк рд╕рдлрд▓!");
                    window.location.href = "webpage.html";
                } else {
                    alert("тЭМ рд╕рд╛рдЗрдирдЕрдк рд╡рд┐рдлрд▓: " + data.error);
                }
            } catch (error) {
                console.error("Error:", error);
                alert("тЪая╕П рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЧрдпрд╛, рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ!");
            }
        });

        function applyLanguage(lang) {
            const textContent = {
                hindi: {
                    title: "рд╕рд╛рдЗрди рдЕрдк",
                    desc: "рдХреГрдкрдпрд╛ рдиреАрдЪреЗ рдЕрдкрдирд╛ рд╡рд┐рд╡рд░рдг рднрд░реЗрдВ",
                    nameLabel: "рдкреВрд░рд╛ рдирд╛рдо:",
                    phoneLabel: "рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:",
                    passwordLabel: "рдкрд╛рд╕рд╡рд░реНрдб:",
                    langLabel: "ЁЯМП рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ:",
                    signupBtn: "рд╕рд╛рдЗрди рдЕрдк рдХрд░реЗрдВ",
                    loginText: "рдкрд╣рд▓реЗ рд╕реЗ рдЦрд╛рддрд╛ рд╣реИ? <a href='login.html'>рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ</a>",
                },
                english: {
                    title: "Sign Up",
                    desc: "Please fill in your details below",
                    nameLabel: "Full Name:",
                    phoneLabel: "Mobile Number:",
                    passwordLabel: "Password:",
                    langLabel: "ЁЯМП Select Language:",
                    signupBtn: "Sign Up",
                    loginText: "Already have an account? <a href='login.html'>Login</a>",
                }
            };

            document.getElementById("title").innerText = textContent[lang].title;
            document.getElementById("desc").innerText = textContent[lang].desc;
            document.getElementById("nameLabel").innerText = textContent[lang].nameLabel;
            document.getElementById("phoneLabel").innerText = textContent[lang].phoneLabel;
            document.getElementById("passwordLabel").innerText = textContent[lang].passwordLabel;
            document.getElementById("langLabel").innerText = textContent[lang].langLabel;
            document.getElementById("signup-btn").innerText = textContent[lang].signupBtn;
            document.getElementById("login-text").innerHTML = textContent[lang].loginText;
        }
    </script>

</body>

</html>
